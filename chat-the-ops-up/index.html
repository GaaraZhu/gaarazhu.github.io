<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Chat the Ops up - Gary&#39;s Blog</title>
  <meta name="description" content="TL;DR 
This is the story of how we improved our CI/CD methodology by using Bamboo-on-Teams, a serverless ChatOps tool for interacting with Atlassian Bamboo from Microsoft Teams.
Background 
We are shifting from monolith architecture to microservices for one of our systems. The goal is to break down the module dependencies, to make the system maintainable and scalable. One challenge we had was the increasing operational complexity as we now have around 50 microservices to build and to deploy whereas there used to be only one.">
  <meta name="author" content="GaryZhu"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Gary\u0027s Blog",
    
    "url": "https:\/\/GaaraZhu.github.io"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/GaaraZhu.github.io"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/GaaraZhu.github.io",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/GaaraZhu.github.io\/chat-the-ops-up\/",
          "name": "Chat the ops up"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "GaryZhu"
  },
  "headline": "Chat the Ops up",
  "description" : "TL;DR \nThis is the story of how we improved our CI\/CD methodology by using Bamboo-on-Teams, a serverless ChatOps tool for interacting with Atlassian Bamboo from Microsoft Teams.\nBackground \nWe are shifting from monolith architecture to microservices for one of our systems. The goal is to break down the module dependencies, to make the system maintainable and scalable. One challenge we had was the increasing operational complexity as we now have around 50 microservices to build and to deploy whereas there used to be only one.",
  "inLanguage" : "en",
  "wordCount":  521 ,
  "datePublished" : "2021-04-02T11:09:48",
  "dateModified" : "2021-04-02T11:09:48",
  "image" : "https:\/\/GaaraZhu.github.io\/img\/avatar-icon.png",
  "keywords" : [ "CI\/CD, ChatOps, Atlassian Bamboo, Microsoft Teams" ],
  "mainEntityOfPage" : "https:\/\/GaaraZhu.github.io\/chat-the-ops-up\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/GaaraZhu.github.io",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/GaaraZhu.github.io\/img\/avatar-icon.png",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Chat the Ops up" />
<meta property="og:description" content="TL;DR 
This is the story of how we improved our CI/CD methodology by using Bamboo-on-Teams, a serverless ChatOps tool for interacting with Atlassian Bamboo from Microsoft Teams.
Background 
We are shifting from monolith architecture to microservices for one of our systems. The goal is to break down the module dependencies, to make the system maintainable and scalable. One challenge we had was the increasing operational complexity as we now have around 50 microservices to build and to deploy whereas there used to be only one.">
<meta property="og:image" content="https://GaaraZhu.github.io/img/avatar-icon.png" />
<meta property="og:url" content="https://GaaraZhu.github.io/chat-the-ops-up/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Gary&#39;s Blog" />

  <meta name="twitter:title" content="Chat the Ops up" />
  <meta name="twitter:description" content="TL;DR 
This is the story of how we improved our CI/CD methodology by using Bamboo-on-Teams, a serverless ChatOps tool for interacting with Atlassian Bamboo from Microsoft Teams.
Background 
We are …">
  <meta name="twitter:image" content="https://GaaraZhu.github.io/img/avatar-icon.png" />
  <meta name="twitter:card" content="summary" />
  <link href='https://GaaraZhu.github.io/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.96.0" />
  <link rel="alternate" href="https://GaaraZhu.github.io/index.xml" type="application/rss+xml" title="Gary&#39;s Blog"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://GaaraZhu.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://GaaraZhu.github.io/css/highlight.min.css" /><link rel="stylesheet" href="https://GaaraZhu.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://GaaraZhu.github.io">Gary&#39;s Blog</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent">Blog</a>
              <div class="navlinks-children">
                
                  <a href="/chat-the-ops-up">Chat the Ops up</a>
                
              </div>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="Gary&#39;s Blog" href="https://GaaraZhu.github.io">
            <img class="avatar-img" src="https://GaaraZhu.github.io/img/avatar-icon.png" alt="Gary&#39;s Blog" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="page-heading">
              
                <h1>Chat the Ops up</h1>
              
              
                <hr class="small">
              
              
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <h2 id="tldr">TL;DR</h2>
<p><br>
This is the story of how we improved our <a href="https://en.wikipedia.org/wiki/CI/CD">CI/CD</a> methodology by using <a href="https://github.com/GaaraZhu/bamboo-on-teams">Bamboo-on-Teams</a>, a serverless <a href="https://www.atlassian.com/blog/software-teams/what-is-chatops-adoption-guide">ChatOps</a> tool for interacting with Atlassian Bamboo from Microsoft Teams.<br>
 </p>
<h2 id="background">Background</h2>
<p><br>
We are shifting from monolith architecture to microservices for one of our systems. The goal is to break down the module dependencies, to make the system maintainable and scalable. One challenge we had was the increasing operational complexity as we now have around 50 microservices to build and to deploy whereas there used to be only one.<br>
 </p>
<h2 id="sdlc">SDLC</h2>
<p><br>
A quick review of how we are developing, testing and delivering multiple features in parallel.</p>
<ol>
<li>Developers use feature branches to work on individual feature changes.</li>
<li>Building and deploying from the feature branch for dev testing, and create a pull request to merge the feature branch to the target release branch.</li>
<li>Merging the feature branch, building and deploying from the release branch for QA testing.</li>
<li>Deploying changes to UAT for final regression testing.</li>
<li>Production release.</li>
</ol>
<p><img src="/images/chat-the-ops-up/cicd-workflow.png" alt="workflow"></p>
<p> </p>
<h2 id="pain-points">Pain points</h2>
<p> </p>
<h3 id="manual-intervention">Manual intervention</h3>
<p><br>
Imagine that you are working on a feature which requires changes in <strong>10</strong> microservices. In Bamboo you will have to:</p>
<ul>
<li>create <code>20</code> branch plans
<ul>
<li>10 branch plans for the feature branch</li>
<li>10 branch plans for the release branch</li>
</ul>
</li>
<li>build <code>20</code> times
<ul>
<li>10 builds for the feature branch plan</li>
<li>10 builds for the release branch plan</li>
</ul>
</li>
<li>deploy <code>30</code> times
<ul>
<li>10 deployments to Dev environment</li>
<li>10 deployments to QA environment</li>
<li>10 deployments to UAT environment</li>
</ul>
</li>
</ul>
<p>If bugs are found during the testing, more build and deployment job executions will be required.<br>
 </p>
<h3 id="status-notification">Status notification</h3>
<p><br>
The deployment job can only be executed after the build job is finished. Although Bamboo has a good support of notifications to prevent us from checking the job status manually by refreshing the pages, it still requires manual configuration for each Bamboo job (Build and Deploy).<br>
 </p>
<h2 id="solution">Solution</h2>
<p><br>
To make our life easier, I created <a href="https://github.com/GaaraZhu/bamboo-on-teams">Bamboo-on-Teams</a> with below main features to make Microsoft Teams the centralised place for Bamboo operations.</p>
<ul>
<li>Bamboo interaction - interact with Bamboo in Microsoft Teams with wide range of commands.</li>
<li>Result notification - receive notification in Microsoft Teams for Bamboo jobs.</li>
<li>Hanging detection - detect hanging Bamboo jobs and alert in Microsoft Teams.</li>
</ul>
<p> </p>
<h2 id="demo">Demo</h2>
<p> 
<a href="https://youtu.be/94IqLup3o5g"><img src="https://img.youtube.com/vi/94IqLup3o5g/0.jpg" alt="Demo"></a></p>
<p> </p>
<h2 id="security-controls">Security controls</h2>
<p> </p>
<ul>
<li>Webhook security
<ul>
<li>Outgoing webhook can only interact with external web service, with the message text. No access to other APIs, like message history, channel information etc.</li>
<li>Incoming webhook can only receive JSON data with required schema for display, and has no access to other APIs, same with the outgoing webhook.</li>
</ul>
</li>
<li><a href="https://en.wikipedia.org/wiki/HMAC">HMAC</a> between Teams and Bamboo-on-Teams</li>
<li>Dedicated Bamboo API token used for Bamboo-on-Teams</li>
<li>Bamboo resource permission verification (view, execute etc)</li>
<li>Production environment elimination (configurable)<br>
 </li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p><br>
In the journey of CI/CD, we are all learning and trying to improve the overall process, to make it more efficient and more collaborative. This is a tool that solved our problems and made our life easier. If you have similar problems with what we had, please consider this tool.</p>
<p><a href="https://github.com/GaaraZhu/bamboo-on-teams">Bamboo-on-Teams</a> is built on top of Typescript, Serverless and AWS tech stacks which you can find the details in the project page. Issues and PRs are welcome and encouraged: <code>Bamboo-on-Teams</code> is MIT licensed.<br>
 </p>


        
          <div class="blog-tags">
            
              <a href="https://GaaraZhu.github.io/tags/ci/cd/">CI/CD</a>&nbsp;
            
              <a href="https://GaaraZhu.github.io/tags/chatops/">ChatOps</a>&nbsp;
            
              <a href="https://GaaraZhu.github.io/tags/atlassian-bamboo/">Atlassian Bamboo</a>&nbsp;
            
              <a href="https://GaaraZhu.github.io/tags/microsoft-teams/">Microsoft Teams</a>&nbsp;
            
          </div>
        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=https%3a%2f%2fGaaraZhu.github.io%2fchat-the-ops-up%2f&amp;text=Chat%20the%20Ops%20up&amp;via=" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fGaaraZhu.github.io%2fchat-the-ops-up%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2fGaaraZhu.github.io%2fchat-the-ops-up%2f&amp;title=Chat%20the%20Ops%20up" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fGaaraZhu.github.io%2fchat-the-ops-up%2f&amp;title=Chat%20the%20Ops%20up" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fGaaraZhu.github.io%2fchat-the-ops-up%2f&amp;title=Chat%20the%20Ops%20up" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fGaaraZhu.github.io%2fchat-the-ops-up%2f&amp;description=Chat%20the%20Ops%20up" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  

              </div>
            </section>
        

        
          

          
        
      </article>

      


      

    </div>
  </div>
</div>

      
    <div class="page-meta">
  
  
  
</div>


  
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:sec.gary@gmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/GaaraZhu" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/gary-zhu-53114169" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              <a href="https://github.com/GaaraZhu">GaryZhu</a>
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2022
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://GaaraZhu.github.io">Gary&#39;s Blog</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://GaaraZhu.github.io/js/main.js"></script>
<script src="https://GaaraZhu.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://GaaraZhu.github.io/js/load-photoswipe.js"></script>









    
  </body>
</html>

